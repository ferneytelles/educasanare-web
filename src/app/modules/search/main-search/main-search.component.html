<div class="content">

    <div class="headResults" *ngIf="posts">
        <div class="bgcolor" [ngClass]="{'green': posts?.length > 0}">
            <h4 *ngIf="posts?.length > 0">
                Se encontraron {{pagination?.count}} resultados realcionados con "{{tag.replace('_', ' ')}}"
            </h4>
            <h4 *ngIf="1 > posts?.length">
                No se encontraron resultados relacionados con "{{tag.replace('_', ' ')}}"
            </h4>
            <span>{{pagination?.count}} Resultados</span>
        </div>
    </div>



    <ng-container *ngIf="realized">

        <ng-container *ngIf="posts?.length > 0; then results else noResults"></ng-container>

        <ng-template #noResults>
            <div class="noResults">
                <div class="newSearch">
                    <h4>Nueva búsqueda</h4>
                    <p>Si no está satisfecho con los resultados, a continuación realice otra búqueda.</p>
                    <div class="search input-group">
                        <input #tag class="input-text" type="text" name="" id="" placeholder="Buscar...">
                        <div class="input-group-append">
                            <button class="btn" type="submit" (click)="onSubmit()">
                            <span class="material-icons notranslate">search</span>
                        </button>
                        </div>
                    </div>
                </div>
                <div class="help">
                    <p>
                        Si no encuentras lo que estas buscando aquí, a continuación te dejamos otras opciones de ayuda para solucionar el problema.
                    </p>
                    <a class="link">Preguntas frecuentes</a>
                    <a class="link">Manual instruccional</a>
                    <a class="link" (click)="navigate('/contacto')">Contacto</a>
                </div>
            </div>
        </ng-template>
        <ng-template #results>
            <div class="results">
                <div class="post" *ngFor="let item of posts">
                    <div class="image" *ngIf="item.image" (click)="navigate(item.slug)">
                        <img class="img" [src]="item.image | cdnUrl:200" alt="">
                    </div>
                    <div class="content-post" [ngClass]="{'right': item.image}">
                        <h5 class="title" *ngIf="item.title" (click)="navigate(item.slug)">{{item.title}}</h5>
                        <h5 class="subtitle" *ngIf="item.subtitle" (click)="navigate(item.slug)">{{item.subtitle}}</h5>
                        <div class="description" [ngClass]="{'row3': item.subtitle}" *ngIf="item.description" [innerHTML]="item.description|secureHtml"></div>
                        <div class="bottom">
                            <div class="gallery" *ngIf="item.gallery" (click)="navigate(item.slug)">
                                <div class="gal" *ngFor="let img of item.gallery.slice(0,5)">
                                    <img class="img" *ngIf="img.type==='PHOTO'" [src]="img.image |cdnUrl: 100" alt="">
                                </div>
                                <div class="plus" *ngIf="item.gallery.length>4">
                                    <span class="material-icons notranslate">add</span>
                                </div>
                            </div>
                            <div class="date">
                                <span>{{item.creation_date.split(' ').shift()}}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="pagination" *ngIf="pagination?.count>12">
                    <ngb-pagination [collectionSize]="pagination?.count" [pageSize]="12" [maxSize]="3" [rotate]="true" (pageChange)="pageChange($event)">

                        <ng-template ngbPaginationPrevious>
                            <span class="material-icons-outlined notranslate">
                            arrow_back_ios
                            </span>
                            <span class="d-none d-md-block">Anterior</span>
                        </ng-template>

                        <ng-template ngbPaginationNext>
                            <span class="d-none d-md-block">Siguiente</span>
                            <span class="material-icons-outlined notranslate">
                            arrow_forward_ios
                            </span></ng-template>
                    </ngb-pagination>
                </div>
            </div>
        </ng-template>
    </ng-container>

</div>